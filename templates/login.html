<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login â€” z2w</title>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --primary: oklch(0.65 0.15 221.7); --primary-fg: oklch(0.985 0.002 247.8);
      --border: oklch(0.28 0.008 265); --input: oklch(0.28 0.008 265);
      --muted-fg: oklch(0.58 0.012 265); --bg: oklch(0.13 0.008 265);
      --card: oklch(0.17 0.008 265); --fg: oklch(0.93 0.005 265);
      --success: oklch(0.64 0.15 162); --destructive: oklch(0.62 0.24 27);
      --radius: 0.25rem;
    }
    body { font-family:'Figtree',ui-sans-serif,system-ui,sans-serif; background:var(--bg); color:var(--fg); min-height:100vh; display:flex; flex-direction:column; -webkit-font-smoothing:antialiased; }
    .login-wrap { flex:1; display:flex; align-items:center; justify-content:center; padding:24px; }
    .login-card { background:var(--card); border:1px solid var(--border); border-radius:calc(var(--radius)*2); padding:36px; width:100%; max-width:380px; box-shadow:0 24px 80px rgba(0,0,0,0.5); }
    .login-logo { display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:28px; }
    .login-logo img { width:40px; height:40px; border-radius:8px; }
    .login-logo-text { font-size:18px; font-weight:700; }
    .login-title { font-size:15px; font-weight:600; text-align:center; margin-bottom:20px; }
    .form-group { margin-bottom:14px; }
    .form-label { display:block; font-size:13.5px; font-weight:500; margin-bottom:5px; }
    .form-control { width:100%; padding:8px 11px; border:1px solid var(--input); border-radius:var(--radius); font-size:13.5px; font-family:inherit; background:oklch(0.15 0.006 265); color:var(--fg); outline:none; transition:border-color 0.13s, box-shadow 0.13s; }
    .form-control:focus { border-color:var(--primary); box-shadow:0 0 0 3px color-mix(in oklch, var(--primary) 22%, transparent); }
    .form-control::placeholder { color:var(--muted-fg); }
    .btn { display:flex; align-items:center; justify-content:center; gap:7px; width:100%; padding:9px 14px; border-radius:var(--radius); font-size:13.5px; font-weight:600; cursor:pointer; border:1px solid transparent; font-family:inherit; text-decoration:none; transition:background 0.13s; }
    .btn-primary  { background:var(--primary); color:var(--primary-fg); }
    .btn-primary:hover { background:oklch(0.60 0.15 221.7); }
    .btn-ms { background:#0078d4; color:#fff; }
    .btn-ms:hover { background:#006cc1; }
    .btn-secondary { background:oklch(0.22 0.008 265); color:oklch(0.85 0.006 265); border-color:var(--border); }
    .btn-secondary:hover { background:oklch(0.26 0.008 265); }
    .divider { display:flex; align-items:center; gap:10px; margin:16px 0; color:var(--muted-fg); font-size:12.5px; }
    .divider::before, .divider::after { content:''; flex:1; height:1px; background:var(--border); }
    .alert { padding:9px 13px; border-radius:var(--radius); font-size:13.5px; border:1px solid transparent; margin-bottom:14px; }
    .alert-danger  { background:color-mix(in oklch, var(--destructive) 12%, transparent); border-color:color-mix(in oklch, var(--destructive) 25%, transparent); color:oklch(0.78 0.22 27); }
    .alert-success { background:color-mix(in oklch, var(--success) 12%, transparent); border-color:color-mix(in oklch, var(--success) 25%, transparent); color:oklch(0.78 0.14 162); }
    footer { padding:20px; text-align:center; font-size:12px; color:var(--muted-fg); border-top:1px solid var(--border); }
    footer a { color:var(--muted-fg); text-decoration:none; margin:0 8px; }
    footer a:hover { color:var(--fg); }
  </style>
</head>
<body>
<div class="login-wrap">
  <div class="login-card">
    <div class="login-logo">
      <img src="{{ url_for('static', filename='logo.svg') }}" alt="z2w">
      <span class="login-logo-text">Zendesk Offloader</span>
    </div>
    <div class="login-title">Sign in to z2w</div>

    {% with messages = get_flashed_messages(with_categories=true) %}{% if messages %}
      {% for cat, msg in messages %}
      <div class="alert alert-{{ 'danger' if cat == 'error' else cat }}">{{ msg }}</div>
      {% endfor %}
    {% endif %}{% endwith %}

    {% if oauth_enabled %}
    <a href="{{ url_for('login_oauth') }}" class="btn btn-ms mb-3">
      <svg viewBox="0 0 21 21" width="16" height="16"><rect x="1" y="1" width="9" height="9" fill="#f25022"/><rect x="11" y="1" width="9" height="9" fill="#7fba00"/><rect x="1" y="11" width="9" height="9" fill="#00a4ef"/><rect x="11" y="11" width="9" height="9" fill="#ffb900"/></svg>
      Sign in with Microsoft
    </a>
    <div class="divider">or</div>
    {% endif %}

    <form method="POST">
      <div class="form-group"><label class="form-label">Username</label><input type="text" name="username" class="form-control" {% if not oauth_enabled %}autofocus{% endif %} required></div>
      <div class="form-group"><label class="form-label">Password</label><input type="password" name="password" class="form-control" required></div>
      <button type="submit" class="btn btn-primary">Sign in</button>
    </form>
  </div>
</div>
<footer>
  &copy; 2025 RHC Solutions
  <a href="{{ url_for('privacy') }}">Privacy Policy</a>
  <a href="{{ url_for('cookies') }}">Cookie Policy</a>
  <a href="https://t.me/rhcsolutions" target="_blank" rel="noopener">Telegram Support</a>
</footer>
</body>
</html>
